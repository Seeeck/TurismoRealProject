{% extends 'base/base.html'%}
{%load static%}
{%block titulo%}Inicio{%endblock titulo%}

{%block contenido%}
<div class="container-fluid"> 
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="row justify-content-end collapse navbar-collapse" id="navbarNav">
        <ul class="col-md-2 navbar-nav ">
          <li class="nav-item mr-4 ">
            <a class="btn btn-primary" aria-current="page" href="{% url 'funcionario_app:checkin' %}">Adminitrar Pagos</a>
          </li>
          {% if not user.is_anonymous %}
          <li class="nav-item ml-4  ">
            <a class="btn btn-primary" aria-current="page" href="{% url 'users_app:userFuncionario-logout' %}">Cerrar sesion</a>
          </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>
  
<div class="content">
  <h1>Clientes</h1>
  {% if messages %}
  <ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
      {% endfor %}
  </ul>
  {% endif %}
  <form method='GET'>
    <input type='text' name='q' value='{{ request.GET.q }}'>
    <input class="btn btn-primary" type='submit' value="Buscar un cliente">

  </form>
  <h1>Check-in</h1>
  <h2>Cliente:</h2>

  <p>Nombre: {{ cliente.nombre }} {{ cliente.apellido }}</p>
  <p>Rut: {{ cliente.rut }}</p>
  <p>Fecha de nacimiento: {{ cliente.fecha_nacimiento }}</p>

  <h2>Reservas activas</h2>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">reserva</th>
        <th scope="col">valor total</th>
        <th scope="col">nro departamento</th>
        <th scope="col">cantidad de personas </th>
        <th scope="col"> check-in </th>
        <th scope="col"> check-out </th>





      </tr>
    </thead>
    <tbody>
      {% for reserva in Reservas %}
      <tr>
        <th scope="row"> {{ forloop.counter }}</th>
        <td>{{ reserva.id_reserva }}</td>
        <td>{{ reserva.valor_total }}</td>
        <td>{{ reserva.id_departamento.numero_departamento }}</td>
        <td>{{ reserva.id_departamento.numero_personas }}</td>



        <td>{% if reserva.is_pago_checkin %}
          {%else%}<a class="btn btn-success"
            href="{% url 'funcionario_app:enviar-correo' rut=cliente.rut id_reserva=reserva.id_reserva %}"> solicitar
            pago</a>{%endif%} </td>


        

        
        <td>{% if reserva.is_pago_checkout %}{%else%}<a class="btn btn-success"
            href="{% url 'funcionario_app:enviar-correo2' rut=cliente.rut id_reserva=reserva.id_reserva %}"> solicitar
            pago</a> {%endif%}</td>
        




        <!-- .0.user_cliente.id -->
      </tr>
      {% endfor %}
    </tbody>
  </table>


</div>





  {%endblock contenido%}